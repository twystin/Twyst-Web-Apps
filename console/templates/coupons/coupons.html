<div ng-init="outletQuery()" class="row-fluid">
  <h4 class="alert alert-info lead">Create a Coupon</h4>
  <div class="row-fluid">
    <div class="row-fluid">
      <div class="span4">
        Select Outlet
      </div>
      <div class="span8">
        <select ng-model="temp.issued_at">
          <option ng-repeat="outlet in outlets" value="{{outlet._id}}">{{outlet.basics.name}}, {{outlet.contact.location.locality_1.toString()}}</option>
        </select>
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="row-fluid">
      <div class="span4">
        Enter user phone number
      </div>
      <div class="span8">
        <input ng-model="temp.phone">
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="row-fluid">
      <div class="span4">
        Description
      </div>
      <div class="span8">
        <input ng-model="coupon.basics.description">
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="row-fluid">
      <div class="span4">
        Terms
      </div>
      <div class="span8">
        <input ng-model="coupon.terms">
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="row-fluid span6">
      <label>Start date</label>
      <div ng-controller="DatePickerCtrl">
        <div class="form-horizontal">
          <p>
            <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2020-01-01'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="Start date"
            type="date" style="margin:0px;" ng-model="coupon.validity.earn_start" />
            <button class="btn" ng-click="open()"><i class="icon-calendar"></i></button>
          </p>
        </div>
      </div>
    </div>
    <div class="row-fluid span6" style="margin:0px">
      <label>End date</label>
      <div ng-controller="DatePickerCtrl">
        <div class="form-horizontal">
          <p>
            <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2020-01-01'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="End date" type="date"
            style="margin:0px" ng-model="coupon.validity.earn_end" />
            <button class="btn" ng-click="open()"><i class="icon-calendar"></i></button>
          </p>
        </div>
      </div>
    </div>
  </div>
    <div class="row-fluid">
      <div class="row-fluid span2">
        <label>Choose a Reward</label>
      </div>
      <div class="span10">
        <div class="row-fluid span6">
          <label ng-repeat="n in reward_check">
            <input type="radio" ng-model="$parent.selected_reward" ng-value="n" />&nbsp;&nbsp;{{n.text}}
          </label>
        </div>
        <div class="row-fluid span6">
          <div id="percentageDiscount" ng-if="selected_reward.value === 'discount'">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span6">Percentage discount</div>
              <div class="row-fluid span6">
                <select id="title" name="title" class="span8" ng-model="coupon.reward.discount.percentage">
                  <option>5%</option>
                  <option>10%</option>
                  <option>15%</option>
                  <option>20%</option>
                  <option>25%</option>
                  <option>30%</option>
                  <option>35%</option>
                  <option>40%</option>
                  <option>45%</option>
                  <option>50%</option>
                  <option>55%</option>
                  <option>60%</option>
                  <option>65%</option>
                  <option>70%</option>
                  <option>75%</option>
                  <option>80%</option>
                  <option>85%</option>
                  <option>90%</option>
                  <option>95%</option>
                  <option>100%</option>
                </select>
              </div>
            </div>
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span6">Maximum discount</div>
              <div class="row-fluid span6">
                <input id="title" name="title" placeholder="Eg: 1500" class="span8" type="text" ng-model="coupon.reward.discount.max">
              </div>
            </div>
          </div>
          <div id="flatOff" ng-if="selected_reward.value === 'flat'" ng-init="coupon.reward = ''">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span6">Amount off</div>
              <div class="row-fluid span6">
                <input id="title" name="title" placeholder="Eg: 200" class="span8" type="text" ng-model="coupon.reward.flat.off">
              </div>
            </div>
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span6">On a minimum spend</div>
              <div class="row-fluid span6">
                <input id="title" name="title" placeholder="Eg: 1500" class="span8" type="text" ng-model="coupon.reward.flat.spend">
              </div>
            </div>
          </div>
          <div id="free" ng-if="selected_reward.value === 'free'" ng-init="coupon.reward = ''">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span4">Get a free</div>
              <div class="row-fluid span8">
                <input id="title" name="title" placeholder="e.g. Dessert" class="span8" type="text" ng-model="coupon.reward.free.title">
              </div>
            </div>
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span4">With</div>
              <div class="row-fluid span8">
                <input id="title" name="title" placeholder="e.g. Dessert" class="span8" type="text" ng-model="coupon.reward.free._with">
              </div>
            </div>
          </div>
          <div id="buy_one_get_one" ng-if="selected_reward.value === 'buy_one_get_one'" ng-init="coupon.reward = ''">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span4">Buy one Get one</div>
              <div class="row-fluid span8">
                <input id="title" name="title" placeholder="e.g. Dessert" class="span8" type="text" ng-model="coupon.reward.buy_one_get_one.title">
              </div>
            </div>
          </div>
          <div id="happyHours" ng-if="selected_reward.value === 'happy'" ng-init="coupon.reward = ''">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span4">Extension happy hours by</div>
              <div class="row-fluid span8">
                <select id="title" name="title" class="span7" ng-model="coupon.reward.happyhours.extension">
                  <option value="30 minutes">30 minutes</option>
                  <option value="60 minutes">60 minuutes</option>
                  <option value="90 minutes">90 minutes</option>
                  <option value="2 hours">2 hours</option>
                  <option value="3 hours">3 hours</option>
                  <option value="All day">All day</option>
                </select>
              </div>
            </div>
          </div>
          <div id="reducedPrice" ng-if="selected_reward.value === 'reduced'" ng-init="coupon.reward = ''">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span4">Get</div>
              <div class="row-fluid span8">
                <input id="title" name="title" placeholder="Eg: buffet lunch" class="span8" type="text" ng-model="coupon.reward.reduced.what">
              </div>
            </div>
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span3">Worth Rs</div>
              <div class="row-fluid span3">
                <input id="title" name="title" placeholder="Eg: 1500" class="span8" type="text" ng-model="coupon.reward.reduced.worth">
              </div>
              <div class="row-fluid span3" style="margin:0px">For Rs</div>
              <div class="row-fluid span3" style="margin-left:4px">
                <input id="title" name="title" placeholder="Eg: 250." class="span8" type="text" ng-model="coupon.reward.reduced.for_what">
              </div>
            </div>
          </div>
          <div id="reducedPrice" ng-if="selected_reward.value === 'custom'" ng-init="coupon.reward = ''">
            <div class="row-fluid span12" style="margin:0px">
              <div class="row-fluid span4">Customized reward</div>
              <div class="row-fluid span8">
                <textarea id="title" name="title" placeholder="Eg: Mothers get 50% off on mothers day" class="span12" type="text" ng-model="coupon.reward.custom.text">
                </textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


  <div class="row-fluid">
    <button class="btn btn-success btn-large" ng-click="createCoupon()">
      Create
    </button>
  </div>

</div>
