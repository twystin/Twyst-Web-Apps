<div class="row-fluid" style="min-height:580px;" ng-init="readOne()">	
	<div class="lead row-fluid offset1 span10" style="padding-top:30px;">
		<h2>Update winback program</h2>
	</div>
	<div class="row-fluid">
		<div class="row-fluid offset1 span10">
			<div class="row-fluid">
				<div class="span2">
					Program Name
				</div>
				<div class="span10">
					<input required type="text" ng-model="winback.name" class="span4"> 
				</div>
			</div>
			<div class="row-fluid">
	                <div class="row-fluid span2">
	                    <label>Description</label>
	                </div>
	                <div class="row-fluid span10">
	                    <textarea id="title" name="title" placeholder="Eg: ..." class="span4" type="text" ng-model="winback.description"></textarea>
	                </div>
	            </div>
			<div class="row-fluid">
				<div class="span2">
					Lifetime Check-ins
				</div>
				<div class="span10">
					<input required type="text" ng-model="winback.min_historical_checkins" class="span1"> 
				</div>
			</div>
			<div class="row-fluid">
				<div class="span2">
					Weeks since last visit
				</div>
				<div class="span10">
					<input required type="text" ng-model="winback.weeks_since_last_visit" class="span1"> 
				</div>
			</div>
			<div class="row-fluid">
				<div class="span2">
					Program Validity
				</div>
				<div class="span10">
					<div class="row-fluid">
		              <div class="row-fluid span4">
		                <div ng-controller="DatePickerCtrl">
		                    <div class="form-horizontal">
		                        <p>
		                            <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="Start date" type="date" style="margin:0px;" ng-model="winback.validity.earn_start" class="span6" />
		                            <button class="btn" ng-click="open()"><i class="icon-calendar"></i></button>
		                        </p>
		                    </div>
		                </div>
		              </div>
		              <div class="row-fluid span4" style="margin:0px">
		                <div ng-controller="DatePickerCtrl">
		                    <div class="form-horizontal">
		                        <p>
		                            <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="End date" type="date" style="margin:0px" ng-model="winback.validity.earn_end" class="span6" />
		                            <button class="btn" ng-click="open()"><i class="icon-calendar"></i></button>
		                        </p>
		                    </div>
		                </div>
		              </div>
	        		</div>
				</div>
			</div>
			<div class="row-fluid">
				<div class="span2">
					Voucher Validity (days)
				</div>
				<div class="span10">
					<input required type="text" ng-model="winback.validity.voucher_valid_days" class="span1"> 
				</div>
			</div>
			<div class="row-fluid" ng-repeat="o in winback.offers">
				<div class="row-fluid">
	                <div class="row-fluid span2">
	                    Choose a Reward
	                </div>
	                <div class="row-fluid span10">
	                    <div class="row-fluid span3">
	                        <label ng-repeat="n in reward_check">
	                            <input type="radio" ng-model="$parent.selected_reward" ng-value="n" ng-change="correctReward($parent.selected_reward)"/>&nbsp;&nbsp;{{n.text}}
	                        </label>
	                    </div>
	                    <div class="row-fluid span6">
	                        <div id="percentageDiscount" ng-if="selected_reward.value === 'discount'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span4">Percentage discount</div>
	                                <div class="row-fluid span8">
	                                    <select id="title" name="title" class="span8" ng-model="o.reward.discount.percentage">
	                                        <option ng-repeat="a in getRange(5, 101, 5)" ng-value="{{a}}">{{a}}</option>
	                                    </select>
	                                </div>
	                            </div>
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span4">Maximum discount</div>
	                                <div class="row-fluid span8">
	                                    <input id="title" name="title" placeholder="Eg: 1500" class="span8" type="text" ng-model="o.reward.discount.max">
	                                </div>
	                            </div>
	                        </div>
	                        <div id="flatOff" ng-if="selected_reward.value === 'flat'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span5">Amount off</div>
	                                <div class="row-fluid span7">
	                                    <input id="title" name="title" placeholder="Eg: 200" class="span8" type="text" ng-model="o.reward.flat.off">
	                                </div>
	                            </div>
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span5">On a minimum spend</div>
	                                <div class="row-fluid span7">
	                                    <input id="title" name="title" placeholder="Eg: 1500" class="span8" type="text" ng-model="o.reward.flat.spend">
	                                </div>
	                            </div>
	                        </div>
	                        <div id="free" ng-if="selected_reward.value === 'free'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span3">Get a free</div>
	                                <div class="row-fluid span9">
	                                    <input id="title" name="title" placeholder="e.g. Dessert" class="span8" type="text" ng-model="o.reward.free.title">
	                                </div>
	                            </div>
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span3">With</div>
	                                <div class="row-fluid span9">
	                                    <input id="title" name="title" placeholder="e.g. Dessert" class="span8" type="text" ng-model="o.reward.free._with">
	                                </div>
	                            </div>
	                        </div>
	                        <div id="buy_one_get_one" ng-if="selected_reward.value === 'buy_one_get_one'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span3">Buy one Get one</div>
	                                <div class="row-fluid span9">
	                                    <input id="title" name="title" placeholder="e.g. Dessert" class="span8" type="text" ng-model="o.reward.buy_one_get_one.title">
	                                </div>
	                            </div>
	                        </div>
	                        <div id="happyHours" ng-if="selected_reward.value === 'happyhours'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span5">Extension happy hours by</div>
	                                <div class="row-fluid span7">
	                                    <select id="title" name="title" class="span7" ng-model="o.reward.happyhours.extension">
	                                        <option value="30 minutes">30 minutes</option>
	                                        <option value="60 minutes">60 minuutes</option>
	                                        <option value="90 minutes">90 minutes</option>
	                                        <option value="2 hours">2 hours</option>
	                                        <option value="3 hours">3 hours</option>
	                                        <option value="All day">All day</option>
	                                    </select>
	                                </div>
	                            </div>
	                        </div>
	                        <div id="reducedPrice" ng-if="selected_reward.value === 'reduced'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span2">Get</div>
	                                <div class="row-fluid span10">
	                                    <input id="title" name="title" placeholder="Eg: buffet lunch" class="span8" type="text" ng-model="o.reward.reduced.what">
	                                </div>
	                            </div>
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span2">Worth Rs</div>
	                                <div class="row-fluid span3">
	                                    <input id="title" name="title" placeholder="Eg: 1500" class="span8" type="text" ng-model="o.reward.reduced.worth">
	                                </div>
	                                <div class="row-fluid span2" style="margin:0px">For Rs</div>
	                                <div class="row-fluid span3" style="margin-left:4px">
	                                    <input id="title" name="title" placeholder="Eg: 250." class="span8" type="text" ng-model="o.reward.reduced.for_what">
	                                </div>
	                            </div>
	                        </div>
	                        <div id="reducedPrice" ng-if="selected_reward.value === 'custom'">
	                            <div class="row-fluid span12" style="margin:0px">
	                                <div class="row-fluid span4">Customized reward</div>
	                                <div class="row-fluid span8">
	                                    <textarea id="title" name="title" placeholder="Eg: Mothers get 50% off on mothers day" class="span12" type="text" ng-model="o.reward.custom.text">
	                                    </textarea>
	                                </div>
	                            </div>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row-fluid">
	            	<div class="row-fluid span2" style="margin:0px">
	                    Reward valid on
	                </div>
	                <div class="row-fluid span10">
	                    <div class="row-fluid span2" style="margin:0px" ng-repeat="fruit in time_of_day">
	                        <input id="checkbox" type='checkbox' ng-checked="rewardCheckedTime.indexOf(fruit) != -1" ng-click="rewardToggleCheckTime(fruit)">{{fruit}}
	                        <br>
	                    </div>
	                </div>
	            </div>
	            <div class="row-fluid">
	            	<div class="row-fluid span2" style="margin:0px">
	                    Reward can be used on
	                </div>
	                <div class="row-fluid span10">
	                    <div class="row-fluid span2" style="margin:0px" ng-repeat="fruit in day_of_week">
	                        <input id="checkbox" type='checkbox' ng-checked="rewardCheckedDays.indexOf(fruit) != -1" ng-click="rewardToggleCheckDay(fruit)">{{fruit}}
	                        <br>
	                    </div>
	                </div>
	            </div>
	            <div class="row-fluid">
	                <div class="row-fluid span2">
	                    <label>Terms & Conditions</label>
	                </div>
	                <div class="row-fluid span10">
	                    <textarea id="title" name="title" placeholder="Eg: (maximum of 1000 Rs.)" class="span4" type="text" ng-model="o.terms"></textarea>
	                </div>
	            </div>
			</div>
		</div>
	</div>
	<div class="row-fluid offset1 span10">
		<button ng-click="update()" class="btn btn-success">Update</button>
	</div>
</div>