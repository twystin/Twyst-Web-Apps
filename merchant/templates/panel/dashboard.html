<div class="row-fluid span12 panel-page" ng-init="refresh()">
    <div class="row-fluid span9 panel-part1">
        <div class="row-fluid">
            <div class="row-fluid span5">
                <div ng-init="outletQuery()">
                    <div class="card-checkin">
                        <div class="row-fluid outlethead">
                            <div class="span6">
                                <h4 class="card-padding2">Selected Outlet</h4>
                            </div>
                            <div class="span6 center-select">
                                <select id="offer_valid_on_outlets" ng-model="selected_outlet" ng-show="outlets.length > 1" class="span12">
                                    <option value="{{o._id}}" ng-repeat="o in outlets">{{o.basics.name}}, {{o.contact.location.locality_1.toString()}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="row-fluid outletcard-body">
                            <div ng-show="outlet.basics.is_a" tooltip-placement="top" tooltip="{{outlet.basics.is_a}}" style="padding-left:15px;" class="span3"><img style="border:2px solid black" class="img-polaroid" src="../../../common/images/transparent/{{outlet.basics.is_a}}.png" width="40px" height="40px"></div>
                            <div class="span9">
                                <div class="outlet-name">{{outlet.basics.name}} ({{outlet.contact.location.locality_1.toString()}})</div>
                            </div>
                        </div>
                    </div>
                    <hr/>
                </div>
            </div>
            <div class="row-fluid span7">
                <div class="row-fluid">
                    <div class="span4" tooltip="Total checkins">
                        <div class="card-checkin">
                            <div class="cardhead">
                                <h3 class="card-padding">Checkins</h3>
                            </div>
                            <div>
                                <center>
                                    <div class="span3 image-padding">
                                        <img src="../../../common/images/favicon/twyst.ico" width="32px" height="32px" title="Checkins">
                                    </div>
                                    <div>
                                        <div class="data-font">{{counts.checkin === null ? '--' : counts.checkin}}</div>
                                    </div>
                                </center>
                            </div>
                        </div>
                    </div>
                    <div class="span4" tooltip="Total vouchers generated">
                        <div class="card-voucher">
                            <div class="cardhead">
                                <h3 class="card-padding">Vouchers</h3>
                            </div>
                            <div>
                                <center>
                                    <div class="span3 image-padding">
                                        <img src="../../../common/images/gift_given.png" width="32px" height="32px" title="Vouchers">
                                    </div>
                                    <div>
                                        <div class="data-font">{{counts.voucher === null ? '--' : counts.voucher}}</div>
                                    </div>
                                </center>
                            </div>
                        </div>
                    </div>
                    <div class="span4" tooltip="Total voucher Redemptions">
                        <div class="card-redeemed">
                            <div class="cardhead">
                                <h3 class="card-padding">Redemptions</h3>
                            </div>
                            <div>
                                <center>
                                    <div class="span3 image-padding">
                                        <img src="../../../common/images/gift_used.png" width="32px" height="32px" title="Redemptions">
                                    </div>
                                    <div>
                                        <div class="data-font">{{counts.redeem === null ? '--' : counts.redeem}}</div>
                                    </div>
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
                <hr/>
            </div>
        </div>
        <div class="row-fluid">
            <div class="row-fluid span5">
                <div class="row-fluid">
                    <div class="card-checkin">
                        <div class="outlethead">
                            <h3 class="card-padding1">Check-in a User</h3>
                        </div>
                        <div class="panel-action-body">                            
                            <input type="text" placeholder="9876543210" id="phone_no" name="phone_no" required="true" ng-model="checkin.phone_no">
                            <button type="submit" class="btn btn-custom btn-warning" ng-click="createCheckin()">Check-in</button>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="card-checkin">
                        <div class="outlethead">
                            <h3 class="card-padding1">Redeem Voucher</h3>
                        </div>
                        <div class="panel-action-body">
                            <input type="text" placeholder="Voucher code" id="voucher_code" name="voucher_code" required="true" ng-model="code">
                            <button type="submit" class="btn btn-custom btn-warning" ng-click="getVoucherDetails()">Get details</button>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="card-checkin">
                        <div class="outlethead">
                            <h3 class="card-padding1">Search Voucher</h3>
                        </div>
                        <div class="panel-action-body">
                            <input type="text" placeholder="10 digit phone number" id="voucher_code" name="voucher_code" required="true" ng-model="phone">
                            <button type="submit" class="btn btn-custom btn-warning" ng-click="getVoucherDetailsByPhone()">Search</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row-fluid span7">
                <div class="paneltemplates">
                    <div ng-show="template.success">
                        <div ng-include="'./templates/panel/successpage.html'" onload=""></div>
                    </div>
                    <div ng-show="template.voucher">
                        <div ng-include="'./templates/panel/voucher.html'" onload=""></div>
                    </div>
                    <div ng-show="template.user">
                        <div ng-include="'./templates/panel/user_vouchers.html'" onload=""></div>
                    </div>
                    <div ng-show="template.error">
                        <div ng-include="'./templates/panel/errorpage.html'" onload=""></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid span3 notifications">
        <div class="row-fluid activity-background">
            <div class="row-fluid">
                <div class="activity-padding">
                    <span>Activity Feed</span>
                    <span class="pull-right">
                        <img src="../../../common/images/refresh.png" width="20px" height="20px" title="Click to refresh" ng-click="refresh();">
                    </span>
                </div>
            </div>
            <hr/>
            <div class="row-fluid notif-padding">
                <div class="notif-error-font" ng-hide="voucher_notify.length > 0">
                    <center>No notifications.</center>
                </div>
                <div class="row-fluid" ng-repeat="notif in voucher_notify">
                    <div>
                        Voucher <b>{{notif.basics.code}}</b> redeemed by 
                        <b>{{notif.used_details.used_by.phone}}</b> on 
                        {{notif.used_details.used_time | date: 'medium'}} at <b>{{notif.used_details.used_at.basics.name}} {{notif.used_details.used_at.contact.location.locality_1.toString()}}</b> -
                        {{notif.issue_details.issued_for.basics.description}} -
                        {{notif.issue_details.issued_for.terms}}
                    </div>
                    <button class="btn btn-small btn-success btn-shadow" ng-click="changeVoucherStatus(notif.basics.code)">Ok. We gave the Reward!</button>
                    <hr/>
                </div>
            </div>
        </div>
    </div>
</div>