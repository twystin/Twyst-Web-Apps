<div class="row-fluid" ng-init="getMerchants()">
	<div>
		<div class="span2">
			<h3>Merchant</h3>
			<div class="date-div">
				<select ng-model="selected_merchant" class="span12">
	            	<option value="{{o._id}}" ng-repeat="o in merchants">{{o.username}}</option>
	        	</select>
			</div>
		</div>
		<div class="span2">
			<h3>City</h3>
			<div class="city-div" ng-hide="selected_merchant">
				No merchant selected
			</div>
			<div class="city-div" ng-show="selected_merchant">
		      <div class="row-fluid" ng-repeat="city in all_cities">
		        <input id="checkbox" type='checkbox' ng-checked="cities.indexOf(city) > -1" ng-click="toggleCity(city)"> {{city}}<br>
		      </div>
		  	</div>
		</div>
		<div class="span4">
			<h3>Outlets</h3>
			<div class="city-div">
		      <div class="row-fluid" ng-repeat="outlet in all_outlets track by $index">
		        <input id="checkbox" type='checkbox' ng-checked="outlets.indexOf(outlet._id) > -1" ng-click="toggleOutlet(outlet._id)"> {{outlet.basics.name}}, {{outlet.contact.location.locality_1.toString()}}<br>
		      </div>
		  	</div>
		</div>
		<div class="span4">
			<h3>Program</h3>
			<div class="date-div">
				<select ng-model="selected_program" class="span12">
	            	<option value="{{o._id}}" ng-repeat="o in programs">{{o.name}}</option>
	        	</select>
			</div>
		</div>
	</div>
	<div class="row-fluid">
		<div class="span3">
			<h3>Date range</h3>
			<div class="date-div span10" ng-hide="outlets.length > 0">
				No outlets selected
			</div>
			<div class="date-div span10" ng-show="outlets.length > 0">
			    <div class="form-horizontal" ng-controller="DatePickerCtrl">
			        <p>
			            <input id="appendedInput" type="text" class="input-small" datepicker-popup="{{format}}" is-open="opened" min="'2014-03-01'" max="'2015-06-21'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="Start" type="date" style="margin:0px;" ng-model="range.start" />
			            <button class="btn" ng-click="open()"><i class="icon-calendar"></i></button>
			        </p>
			    </div>
			    <div class="form-horizontal" ng-controller="DatePickerCtrl">
			        <p>
			            <input id="appendedInput" type="text" class="input-small" datepicker-popup="{{format}}" is-open="opened" min="'2014-03-05'" max="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="End" type="date" style="margin:0px;" ng-model="range.end" />
			            <button class="btn" ng-click="open()"><i class="icon-calendar"></i></button>
			        </p>
			    </div>
			</div>
		</div>
	</div>
	<hr/>
	<div>
		<div class="row-fluid">
			<h3>Checkins</h3>
			<div class="row-fluid">
				Total checkins: {{data.CHECKINS.TOTAL}}
			</div>
			<div class="row-fluid">
				<div>
					In-Tier Checkins
				</div>
				<div>
					<table class="table table-bordered table-hover">
                        <thead>
                            <th>
                                Tier
                            </th>
                            <th>
                                Participating Customers
                            </th>
                            <th>
                                Twyst-ins
                            </th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="checkin in data.CHECKINS.RESULTS">
                                <td>
                                    {{checkin.tier.basics.name}}
                                </td>
                                <td>
                                    {{checkin.customer_count}}
                                </td>
                                <td>
                                    {{checkin.in_tier}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
				</div>
			</div>
			<div class="row-fluid">
				<div>
					Per day Checkins
				</div>
				<div>
					<table class="table table-bordered table-hover">
                        <thead>
                            <th>
                                Date
                            </th>
                            <th>
                                Twyst-ins
                            </th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="checkin in data.CHECKINS_DAILY.RESULTS">
                                <td>
                                    {{checkin._id | date: 'fullDate'}}
                                </td>
                                <td>
                                    {{checkin.count}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
				</div>
			</div>
		</div>
	</div>
	<div>
		<div class="row-fluid">
			<h3>Vouchers</h3>
			<div>
				Total vouchers earned: {{data.VOUCHERS.TOTAL.EARNED}}
			</div>
			<div>
				Total vouchers redeemed: {{data.VOUCHERS.TOTAL.REDEEMED}}
			</div>
			<div class="row-fluid">
				<div>
					In-Tier Vouchers
				</div>
				<div>
					<table class="table table-bordered table-hover">
                        <thead>
                            <th>
                                Tier
                            </th>
                            <th>
                               	Earned
                            </th>
                            <th>
                                Redeemed
                            </th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="checkin in data.VOUCHERS.RESULTS">
                                <td>
                                    {{checkin.tier.basics.name}}
                                </td>
                                <td>
                                    {{checkin.earned}}
                                </td>
                                <td>
                                    {{checkin.redeemed}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
				</div>
			</div>
			<div class="row-fluid">
				<div>
					Per day Voucher redemptions
				</div>
				<div>
					<table class="table table-bordered table-hover">
                        <thead>
                            <th>
                                Date
                            </th>
                            <th>
                                Redemptions
                            </th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="voucher in data.VOUCHERS_DAILY.RESULTS">
                                <td>
                                    {{voucher._id | date: 'fullDate'}}
                                </td>
                                <td>
                                    {{voucher.count}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
				</div>
			</div>
		</div>
	</div>
</div>