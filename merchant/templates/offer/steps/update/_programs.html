<div>
    <div class="alert alert-warning" ng-show="message">{{message}}</div>
    <div class="offset1">
        <form role="form" name="offer_basics" novalidate>
            <div class="row">
                <div id="spacing" class="row-fluid">
                    <div class="row-fluid span4">
                        <h4>Program Name*</h4>
                    </div>
                    <div class="row-fluid span8">
                        <input id="outlet_name" name="outlet_name" required ng-minlength=5 ng-maxlength=256 type="text" ng-model="program.name" class="span7">

                        <div class="error" ng-show="offer_basics.outlet_name.$dirty && offer_basics.outlet_name.$invalid">
                            <div class="error" ng-show="offer_basics.outlet_name.$error.required">
                                Required field
                            </div>
                            <div class="error" ng-show="offer_basics.outlet_name.$error.minlength">
                                At least 5 characters
                            </div>
                            <div class="error" ng-show="offer_basics.outlet_name.$error.maxlength">
                                No more than 256 characters
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div id="spacing" class="row-fluid">
                    <div class="row-fluid span4">
                        <h4>Program Status*</h4>
                    </div>
                    <div class="span8">
                        <select ng-model="program.status" class="span8">
                            <option value="active">Active</option>
                            <option value="archived">Expired</option>
                        </select>
                    </div>
                </div>
            </div>
            <hr/>
            <div class="row">
                <div id="spacing" class="row-fluid">
                  <div class="row-fluid span4">
                    <label>Update image</label>
                  </div>
                  <div class="row-fluid span8">
                    <div class="fileinputs span12">        
                      <input style="width:70px; height:100px;" type="file" class="file" ng-file-select="onFileSelect($files)" ng-disabled='disableImgUploadButton'/>
                      <div class="btn btn-{{upload_color}} fakefile" ng-disabled='disableImgUploadButton'>      
                            <b>{{upload_label}}</b>
                            <div class="span12" ng-show="image_loading">
                              <progress percent="dynamicObject" class="progress-striped active"></progress>
                            </div>                   
                      </div>
                    </div>
                    <div class="error" ng-if="image_upload_message">
                      {{image_upload_message}}
                    </div>          
                  </div>
                </div>
            </div>
            <hr/>
            <div class="row">
                <h4>
                  Change Validity (Earn period)
                </h4>
                <div class="row-fluid">
                    <div class="row-fluid span6">
                        <label>Start date</label>
                        <div ng-controller="DatePickerCtrl">
                            <div class="form-horizontal">
                                <p>
                                    <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2020-01-01'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="Start date"
                                    type="date" style="margin:0px;" ng-model="program.validity.earn_start" />
                                    <button class="btn" ng-click="open()"><i class="icon-calendar"></i>
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid span6" style="margin:0px">
                        <label>End date</label>
                        <div ng-controller="DatePickerCtrl">
                            <div class="form-horizontal">
                                <p>
                                    <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2020-01-01'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="End date" type="date"
                                    style="margin:0px" ng-model="program.validity.earn_end" />
                                    <button class="btn" ng-click="open()"><i class="icon-calendar"></i>
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="error" ng-show="program.validity.earn_start>=program.validity.earn_end">
                    Start date can not be less or equal to End date
                </div>
            </div>
            <hr/>
            <div class="row">
                <h4>
                  Change Validity (Burn period)
                </h4>
                <div class="row-fluid">
                    <div class="row-fluid span6">
                        <label>Start date</label>
                        <div ng-controller="DatePickerCtrl">
                            <div class="form-horizontal">
                                <p>
                                    <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2020-01-01'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="Start date"
                                    type="date" style="margin:0px;" ng-model="program.validity.burn_start" />
                                    <button class="btn" ng-click="open()"><i class="icon-calendar"></i>
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid span6" style="margin:0px">
                        <label>End date</label>
                        <div ng-controller="DatePickerCtrl">
                            <div class="form-horizontal">
                                <p>
                                    <input id="appendedInput" type="text" datepicker-popup="{{format}}" is-open="opened" min="minDate" max="'2020-01-01'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="End date" type="date"
                                    style="margin:0px" ng-model="program.validity.burn_end" />
                                    <button class="btn" ng-click="open()"><i class="icon-calendar"></i>
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="error" ng-show="program.validity.burn_start>=program.validity.burn_end">
                    Start date can not be less or equal to End date
                </div>
            </div>
            <hr/>
            <div class="row">
                <h4>Change participating Outlet</h4>
                <div class="row-fluid" ng-init="outletQuery()">
                    <div class="offset2" style="margin:0px" ng-repeat="fruit in all_outlets">
                        <input id="checkbox" type='checkbox' ng-checked="participating_outlets.indexOf(fruit._id) != -1" ng-click="toggleOutlets(fruit._id)">{{fruit.basics.name}},{{fruit.contact.location.locality_1.toString()}}
                        <br>
                    </div>
                </div>
            </div>
        </form>
        <div>
            <button type="button" class="btn btn-primary" ng-click="updateProgram()">Update</button>
        </div>
    </div>
</div>